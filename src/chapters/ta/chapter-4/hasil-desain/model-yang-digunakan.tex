\subsection{Model yang Digunakan}
\label{subsec:model-yang-digunakan}

Sistem TrackMyBills menggunakan dua jenis model yang menggunakan arsitektur model \donut{} yang telah disesuaikan dengan karakteristik dokumen pembayaran Indonesia. Dua jenis model ini digunakan karena perbedaan signifikan dari segi \emph{layout}, struktur informasi, dan visual pada dokumen bukti pembayaran QRIS dan/transfer dan struk pembayaran.

Kedua model yang diimplementasikan menggunakan arsitektur \transformer{} yang menggabungkan \emph{vision encoder} dan \emph{text decoder} untuk memahami dokumen secara holistik. \donut{} menggunakan \swin{} sebagai \emph{vision encoder} untuk memproses informasi visual dokumen dan \bart{} sebagai \emph{text decoder} untuk menghasilkan keluaran terstruktur dalam format JSON. Kombinasi ini memungkinkan model untuk memahami tidak hanya teks yang terbaca, tetapi juga layout dan konteks visual dokumen secara keseluruhan.

% **Diagram yang disarankan**: Arsitektur dual-model dengan visualisasi jalur inference untuk setiap jenis dokumen, menunjukkan preprocessing, vision encoding, text decoding, dan postprocessing untuk masing-masing model.

\subsubsection{Model DONUT QRIS-TF}
\label{subsubsec:donut-qris-tf}

Model \donut{} QRIS-TF, disebut \textbf{\emph{custom model}} ke depannya, merupakan hasil \emph{fine-tuning} dari model \donutcord{} pada \dataset{} QRIS dan transfer. Model ini dilatih menggunakan \dataset{} yang dikumpulkan dari berbagai \emph{platform} pembayaran populer di Indonesia untuk mencakup variasi \emph{layout} dan format. Jumlah data yang digunakan untuk melakukan pelatihan adalah 257 sampel, sedangkan 56 sampel digunakan untuk melakukan validasi dan 29 sampel digunakan sebagai data uji.

Konfigurasi model custom menggunakan \emph{task prompt} khusus \texttt{<s\_payment\_proof>} yang memberikan konteks spesifik untuk jenis dokumen yang akan diproses. Model ini memiliki jumlah \emph{vocabulary} yang diperluas dengan 14 token spesial baru yang disesuaikan dengan informasi yang perlu diekstrak dari bukti pembayaran QRIS dan transfer, yang terdiri dari:
\begin{enumerate}
    \item \texttt{<s\_total\_amount>} dan \texttt{</s\_total\_amount>} untuk nominal pembayaran.
    \item \texttt{<s\_transaction\_time>} dan \texttt{</s\_transaction\_time>} untuk waktu transaksi.
    \item \texttt{<s\_transaction\_identifier>} dan \texttt{</s\_transaction\_identifier>} untuk ID transaksi.
    \item \texttt{<s\_type>} dan \texttt{</s\_type>} untuk jenis transaksi (QRIS atau transfer).
    \item \texttt{<s\_target\_name>} dan \texttt{</s\_target\_name>} untuk nama penerima.
    \item \texttt{<s\_application>} dan \texttt{</s\_application>} untuk aplikasi pembayaran yang digunakan.
    \item \texttt{<s\_payment\_proof>} dan \texttt{</s\_payment\_proof>} sebagai \emph{task prompt} khusus tugas ekstraksi dokumen QRIS dan transfer.
\end{enumerate}

Model dilatih dengan menambahkan 14 token spesial ke dalam \emph{vocabulary model} untuk memastikan bahwa model dapat mengenali dan menghasilkan keluaran yang sesuai. Pelatihan dilakukan dengan parameter berikut:
\begin{enumerate}
\item \emph{Learning rate}: 3e-5
\item \emph{Batch size}: 1
\item \emph{Epoch}: 30
\item \emph{Gradient accumulation steps}: 8
\item \emph{Weight decay}: 0,01
\end{enumerate}

Selama pelatihan, \emph{weight} dari setiap token spesial diatur untuk mengadaptasikan model untuk mengenali atribut relevan yang sesuai dengan tugas ekstraksi model. Selama pelatihan, model akan mencoba untuk memprediksi atribut dari masukan gambar yang diberikan dan mengkalkulasikan perbedaan antara prediksi dan \emph{ground truth} yang telah ditentukan. Hasil kalkulasi akan digunakan untuk mengubah \emph{weight} dari token spesial yang digunakan. Proses ini dilakukan berulang kali selama 30 \emph{epoch}. Pelatihan baru akan dihentikan saat \emph{validation loss} tidak berubah atau mengalami perubahan yang sangat sedikit selama 3 \emph{epoch} berturut-turut.

\emph{Training Loss}, \emph{loss} yang dikalkulasikan terhadap data pelatihan, berubah dari 3,7252 menjadi 0,0769 dan \emph{Validation Loss}, \emph{loss} yang dikalkulasikan terhadap data validasi, berubah dari 5,563 menjadi 0,5836. Kedua variabel ini perlu dikontrol untuk memastikan bahwa model tidak mengalami \emph{overfitting} pada data pelatihan. Jika \emph{Training Loss} terus berkurang dan \emph{Validation Loss} malah terus bertambah selama pelatihan, hal tersebut menjadi indikasi kuat terjadinya \emph{overfitting}. Hasil pelatihan menunjukkan bahwa model dapat belajar dengan baik dari data yang diberikan dan dapat menghasilkan keluaran yang sesuai dengan atribut yang diharapkan.

\subsubsection{Model DONUT CORD-v2}
\label{subsubsec:model-base}

PTM \donut{} \texttt{naver-clova-ix/donut-base-finetuned-cord-v2} digunakan sebagai model dasar, disebut \textbf{\emph{base model}} ke depannya. Karena \emph{base model} adalah sebuah PTM, model ini bukanlah artefak dari sistem. PTM ini telah di-\emph{fine-tune} pada \dataset{} CORD-v2, sehingga telah memiliki pemahaman yang baik terhadap struktur dan format struk pembayaran yang umum digunakan untuk dokumen struk pembayaran tanpa proses \emph{fine-tuning} tambahan. \datasetfl{} CORD-v2 memiliki kekurangan, yaitu \dataset{} yang digunakan memiliki bagian \emph{header} dan \emph{footer} yang di-\emph{blur} untuk memudahkan model memahami isi dokumen. \datasetfl{} CORD-v2 memiliki 800 sampel pelatihan, 100 sampel validasi, dan 100 sampel uji yang digunakan untuk melatih model \donut{} pada format struk pembayaran.

Konfigurasi \emph{base model} menggunakan \emph{task prompt} \texttt{<s\_cord-v2>} untuk melakukan tugas ekstraksi informasi dari struk pembayaran. Informasi yang diekstrak dari struk pembayaran beragam hingga \emph{level bounding box} tiap atribut. Informasi yang digunakan dari seluruh data ekstraksi tersebut terbatas pada:
\begin{enumerate}
    \item \texttt{<s\_menu>} dan \texttt{</s\_menu>} untuk daftar menu dengan atribut berikut:
    \begin{enumerate}
        \item \texttt{<s\_nm>} dan \texttt{</s\_nm>} untuk nama menu
        \item \texttt{<s\_cnt>} dan \texttt{</s\_cnt>} untuk kuantitas
        \item \texttt{<s\_price>} dan \texttt{</s\_price>} untuk harga
    \end{enumerate}
    \item \texttt{<s\_total\_price>} dan \texttt{</s\_total\_price>} untuk total pembayaran
\end{enumerate}

% \emph{Base model} mengimplementasikan preprocessing yang robust untuk optimasi ukuran gambar dengan maximum dimension 2048 pixels dan automatic resizing menggunakan Lanczos resampling untuk mempertahankan kualitas visual. Generation configuration menggunakan single beam search dengan early stopping untuk optimasi kecepatan inference sambil mempertahankan akurasi yang tinggi.

Keluaran \emph{base model} berupa struktur JSON yang kompleks dan hierarkis, sesuai dengan format \emph{ground truth} pada \dataset{} CORD-v2 yang mencerminkan struktur struk. Model ini juga menggunakan token-to-JSON \emph{converter} untuk mengubah format yang dari deretan sekuensial token yang digunakan menjadi format JSON.

% **Diagram yang disarankan**: Comparison matrix antara kedua model menunjukkan input types, special tokens, output structure, dan use cases masing-masing model.

% Kedua model menggunakan automatic device detection yang dapat beradaptasi dengan hardware yang tersedia, baik CPU maupun GPU inference. Implementasi singleton pattern memastikan model hanya dimuat sekali dalam memory untuk mengoptimalkan resource usage dan mengurangi latency pada request subsequent.
